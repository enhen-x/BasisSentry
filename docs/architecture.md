# èµ„é‡‘è´¹ç‡å¥—åˆ©ç³»ç»Ÿæ¶æ„æ–‡æ¡£

> **ç‰ˆæœ¬**: v2.0  
> **æœ€åæ›´æ–°**: 2026-01-04  
> **ç›®æ ‡**: é’ˆå¯¹å°èµ„é‡‘ï¼ˆ100-10000 USDTï¼‰çš„æ°¸ç»­åˆçº¦èµ„é‡‘è´¹ç‡å¥—åˆ©ç³»ç»Ÿ

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 ç­–ç•¥åŸç†

æ°¸ç»­åˆçº¦é€šè¿‡**èµ„é‡‘è´¹ç‡æœºåˆ¶**ä½¿åˆçº¦ä»·æ ¼é”šå®šç°è´§ä»·æ ¼ï¼š
- **æ­£è´¹ç‡**: å¤šå¤´æ”¯ä»˜ç©ºå¤´ï¼ˆåˆçº¦ä»·æ ¼ > ç°è´§ä»·æ ¼ï¼‰
- **è´Ÿè´¹ç‡**: ç©ºå¤´æ”¯ä»˜å¤šå¤´ï¼ˆåˆçº¦ä»·æ ¼ < ç°è´§ä»·æ ¼ï¼‰

**å¥—åˆ©é€»è¾‘**ï¼šå»ºç«‹ Delta ä¸­æ€§å¤´å¯¸ï¼Œèµšå–èµ„é‡‘è´¹ç‡æ”¶ç›Š
```
æ­£è´¹ç‡å¥—åˆ©: ç°è´§åšå¤š + æ°¸ç»­åšç©º â†’ æ”¶å–èµ„é‡‘è´¹
è´Ÿè´¹ç‡å¥—åˆ©: ç°è´§åšç©º(å€Ÿå¸) + æ°¸ç»­åšå¤š â†’ æ”¶å–èµ„é‡‘è´¹
```

### 1.2 æ ¸å¿ƒä¼˜åŠ¿å®šä½

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| **æµåŠ¨æ€§ç­›é€‰** | ä¸“æ³¨ä¸­ä½æµåŠ¨æ€§æ± ï¼ˆæ—¥äº¤æ˜“é‡ $500K-$5Mï¼‰ï¼Œå¤§èµ„é‡‘æ— æ³•æœ‰æ•ˆæ“ä½œ |
| **è‡ªåŠ¨åŒ–æ‰§è¡Œ** | æ•£æˆ·ç¼ºä¹æŠ€æœ¯èƒ½åŠ›ï¼Œæˆ‘ä»¬ç”¨ç¨‹åºå®ç°æ¯«ç§’çº§å“åº” |
| **å°èµ„é‡‘çµæ´»** | 100-10000 USDT å¯å¿«é€Ÿè¿›å‡ºï¼Œæ»‘ç‚¹å½±å“å¯æ§ |

### 1.3 é£é™©æ”¶ç›Šç›®æ ‡

- **é¢„æœŸå¹´åŒ–**: 15%-50%ï¼ˆå–å†³äºè´¹ç‡ç¯å¢ƒï¼‰
- **æœ€å¤§å›æ’¤**: < 5%ï¼ˆDelta ä¸­æ€§ç­–ç•¥ï¼‰
- **å•æ¬¡è´¹ç‡æ”¶ç›Š**: 0.01%-0.3%ï¼ˆæ¯ 8 å°æ—¶ç»“ç®—ä¸€æ¬¡ï¼‰

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ¨¡å—åˆ’åˆ†

```
funding_rate_arbitrage/
â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ settings.yaml       # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ exchanges.yaml      # äº¤æ˜“æ‰€é…ç½®
â”‚   â””â”€â”€ strategy.yaml       # ç­–ç•¥å‚æ•°
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ engine.py       # å¥—åˆ©å¼•æ“ä¸»å¾ªç¯
â”‚   â”‚   â”œâ”€â”€ position.py     # ä»“ä½ç®¡ç†
â”‚   â”‚   â””â”€â”€ risk.py         # é£é™©æ§åˆ¶
â”‚   â”œâ”€â”€ data/               # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ funding_rate.py # èµ„é‡‘è´¹ç‡é‡‡é›†
â”‚   â”‚   â”œâ”€â”€ orderbook.py    # è®¢å•ç°¿æ·±åº¦
â”‚   â”‚   â””â”€â”€ market.py       # è¡Œæƒ…æ•°æ®
â”‚   â”œâ”€â”€ exchange/           # äº¤æ˜“æ‰€é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ base.py         # æŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ binance.py      # Binance é€‚é…
â”‚   â”‚   â”œâ”€â”€ bybit.py        # Bybit é€‚é…
â”‚   â”‚   â””â”€â”€ okx.py          # OKX é€‚é…
â”‚   â”œâ”€â”€ strategy/           # ç­–ç•¥é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ scanner.py      # æœºä¼šæ‰«æ
â”‚   â”‚   â”œâ”€â”€ selector.py     # æ± å­ç­›é€‰
â”‚   â”‚   â””â”€â”€ executor.py     # äº¤æ˜“æ‰§è¡Œ
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ logger.py       # æ—¥å¿—ç³»ç»Ÿ
â”‚       â”œâ”€â”€ notifier.py     # æ¶ˆæ¯é€šçŸ¥
â”‚       â””â”€â”€ helpers.py      # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ scripts/                # è¿è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ run_scanner.py      # å¯åŠ¨æ‰«æå™¨
â”‚   â”œâ”€â”€ run_arbitrage.py    # å¯åŠ¨å¥—åˆ©
â”‚   â””â”€â”€ backtest.py         # å›æµ‹è„šæœ¬
â”œâ”€â”€ tests/                  # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ data/                   # æœ¬åœ°æ•°æ®å­˜å‚¨
â””â”€â”€ docs/                   # æ–‡æ¡£
```

### 2.2 æ•°æ®æµæ¶æ„

```mermaid
flowchart LR
    subgraph DataLayer["æ•°æ®å±‚"]
        FR[èµ„é‡‘è´¹ç‡API]
        OB[è®¢å•ç°¿æ·±åº¦]
        MK[è¡Œæƒ…æ•°æ®]
    end
    
    subgraph CoreEngine["æ ¸å¿ƒå¼•æ“"]
        SC[æœºä¼šæ‰«æå™¨]
        SL[æ± å­ç­›é€‰å™¨]
        RM[é£é™©ç®¡ç†]
        EX[äº¤æ˜“æ‰§è¡Œå™¨]
    end
    
    subgraph Exchanges["äº¤æ˜“æ‰€"]
        BN[Binance]
        BB[Bybit]
        OK[OKX]
    end
    
    FR --> SC
    OB --> SL
    MK --> RM
    
    SC --> SL --> RM --> EX
    EX --> BN & BB & OK
```

---

## 3. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 3.1 æ± å­ç­›é€‰å™¨ (Selector)

**ç­›é€‰æ¡ä»¶**ï¼ˆé’ˆå¯¹å°èµ„é‡‘ä¼˜åŒ–ï¼‰ï¼š

| ç»´åº¦ | æœ€å°å€¼ | æœ€å¤§å€¼ | è¯´æ˜ |
|------|--------|--------|------|
| 24h äº¤æ˜“é‡ | $500,000 | $5,000,000 | é¿å¼€å¤§èµ„é‡‘å’Œæ­»æ±  |
| è®¢å•ç°¿æ·±åº¦ | $10,000 | $100,000 | Â±0.5% ä»·æ ¼èŒƒå›´å†… |
| èµ„é‡‘è´¹ç‡ç»å¯¹å€¼ | 0.03% | - | è¦†ç›–æ‰‹ç»­è´¹åæœ‰åˆ©æ¶¦ |
| è´¹ç‡é¢„æµ‹æ–¹å‘ | ç¨³å®š | - | é¿å…è´¹ç‡åè½¬ |
| ä»·å·® (Spread) | - | 0.1% | ç°è´§-åˆçº¦ä»·å·®ä¸èƒ½å¤ªå¤§ |

**ç­›é€‰ç®—æ³•**ï¼š
```python
def filter_pools(pools: list[Pool]) -> list[Pool]:
    """
    ç­›é€‰ç¬¦åˆæ¡ä»¶çš„äº¤æ˜“æ± 
    ä¼˜å…ˆçº§: è´¹ç‡æ”¶ç›Š > æµåŠ¨æ€§å®‰å…¨ > ä»·å·®æˆæœ¬
    """
    candidates = []
    for pool in pools:
        # æµåŠ¨æ€§çª—å£æ£€æŸ¥
        if not (MIN_VOLUME <= pool.volume_24h <= MAX_VOLUME):
            continue
        # æ·±åº¦æ£€æŸ¥
        if pool.depth_05pct < MIN_DEPTH:
            continue
        # è´¹ç‡é—¨æ§›
        if abs(pool.funding_rate) < MIN_RATE:
            continue
        # ä»·å·®æ£€æŸ¥
        if pool.spread > MAX_SPREAD:
            continue
        
        # è®¡ç®—é¢„æœŸæ”¶ç›Š
        pool.expected_profit = calc_expected_profit(pool)
        candidates.append(pool)
    
    # æŒ‰é¢„æœŸæ”¶ç›Šæ’åº
    return sorted(candidates, key=lambda x: x.expected_profit, reverse=True)
```

### 3.2 ä»“ä½ç®¡ç† (Position)

**ä»“ä½è§„åˆ™**ï¼š

| è§„åˆ™ | å€¼ | è¯´æ˜ |
|------|-----|------|
| å•å¸ç§æœ€å¤§ä»“ä½ | æ€»èµ„é‡‘ 30% | åˆ†æ•£é£é™© |
| æ€»ä»“ä½ä¸Šé™ | æ€»èµ„é‡‘ 80% | ä¿ç•™åº”æ€¥èµ„é‡‘ |
| æ æ†å€æ•° | 1-3x | ä½æ æ†é™ä½æ¸…ç®—é£é™© |
| Delta åå·®å®¹å¿ | Â±2% | è¶…å‡ºéœ€è°ƒä»“ |

**ä»“ä½æ•°æ®ç»“æ„**ï¼š
```python
@dataclass
class Position:
    symbol: str                 # äº¤æ˜“å¯¹
    spot_qty: Decimal          # ç°è´§æ•°é‡
    spot_avg_price: Decimal    # ç°è´§æˆæœ¬
    perp_qty: Decimal          # åˆçº¦æ•°é‡ï¼ˆè´Ÿæ•°ä¸ºç©ºå¤´ï¼‰
    perp_avg_price: Decimal    # åˆçº¦æˆæœ¬
    leverage: int              # æ æ†å€æ•°
    margin: Decimal            # ä¿è¯é‡‘
    unrealized_pnl: Decimal    # æœªå®ç°ç›ˆäº
    funding_earned: Decimal    # ç´¯è®¡èµ„é‡‘è´¹æ”¶ç›Š
    opened_at: datetime        # å¼€ä»“æ—¶é—´
```

### 3.3 é£é™©æ§åˆ¶ (Risk)

**é£é™©æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | é˜ˆå€¼ | åŠ¨ä½œ |
|------|------|------|
| ä¿è¯é‡‘ç‡ | < 50% | è­¦å‘Š + å‡ä»“ |
| ä¿è¯é‡‘ç‡ | < 30% | å¼ºåˆ¶å¹³ä»“ |
| å•ç¬”äºæŸ | > 2% æœ¬é‡‘ | è§¦å‘æ­¢æŸ |
| è´¹ç‡åè½¬ | è¿ç»­ 2 æœŸ | å¹³ä»“è§‚æœ› |
| Delta åå·® | > 5% | å¼ºåˆ¶è°ƒä»“ |

**é£é™©æ£€æŸ¥æµç¨‹**ï¼š
```python
async def check_risk(position: Position) -> RiskAction:
    """
    æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡é£é™©æ£€æŸ¥
    è¿”å›: HOLD / REDUCE / CLOSE / REBALANCE
    """
    # 1. ä¿è¯é‡‘ç‡æ£€æŸ¥
    margin_ratio = position.margin / position.notional_value
    if margin_ratio < 0.3:
        return RiskAction.CLOSE
    if margin_ratio < 0.5:
        return RiskAction.REDUCE
    
    # 2. Delta ä¸­æ€§æ£€æŸ¥
    delta = calc_delta(position)
    if abs(delta) > 0.05:
        return RiskAction.REBALANCE
    
    # 3. è´¹ç‡æ–¹å‘æ£€æŸ¥
    if is_rate_reversed(position.symbol):
        return RiskAction.CLOSE
    
    return RiskAction.HOLD
```

### 3.4 äº¤æ˜“æ‰§è¡Œå™¨ (Executor)

**æ‰§è¡Œæµç¨‹**ï¼š

```mermaid
sequenceDiagram
    participant S as Scanner
    participant E as Executor
    participant Spot as ç°è´§å¸‚åœº
    participant Perp as æ°¸ç»­åˆçº¦
    
    S->>E: å‘ç°å¥—åˆ©æœºä¼š
    E->>E: è®¡ç®—ä¸‹å•æ•°é‡
    
    par å¹¶è¡Œä¸‹å•
        E->>Spot: å¸‚ä»·ä¹°å…¥ç°è´§
        E->>Perp: å¸‚ä»·å¼€ç©ºåˆçº¦
    end
    
    Spot-->>E: æˆäº¤ç¡®è®¤
    Perp-->>E: æˆäº¤ç¡®è®¤
    
    E->>E: æ£€æŸ¥ Delta åå·®
    alt Delta > é˜ˆå€¼
        E->>Spot: è°ƒæ•´ç°è´§ä»“ä½
    end
    
    E->>E: è®°å½•ä»“ä½ä¿¡æ¯
```

**æ»‘ç‚¹æ§åˆ¶**ï¼š
```python
def calc_order_size(pool: Pool, target_usd: Decimal) -> Decimal:
    """
    åŸºäºè®¢å•ç°¿æ·±åº¦è®¡ç®—æœ€ä¼˜ä¸‹å•é‡ï¼Œæ§åˆ¶æ»‘ç‚¹ < 0.1%
    """
    depth = pool.orderbook_depth
    max_size_without_slippage = depth.get('0.1%', 0) * 0.5  # å–ä¸€åŠæ·±åº¦
    
    return min(target_usd, max_size_without_slippage)
```

---

## 4. äº¤æ˜“æ‰€é›†æˆ

### 4.1 æ”¯æŒçš„äº¤æ˜“æ‰€

| äº¤æ˜“æ‰€ | ä¼˜å…ˆçº§ | è´¹ç‡ç»“ç®— | API ç‰¹ç‚¹ |
|--------|--------|----------|----------|
| **Binance** | P0 | æ¯ 8h | æµåŠ¨æ€§æœ€å¥½ï¼ŒAPI ç¨³å®š |
| **Bybit** | P1 | æ¯ 8h | è´¹ç‡æ³¢åŠ¨å¤§ï¼Œæœºä¼šå¤š |
| **OKX** | P2 | æ¯ 8h | æ·±åº¦å¥½ï¼Œè´¹ç‡åˆç† |

### 4.2 API æŠ½è±¡å±‚

```python
class ExchangeBase(ABC):
    """äº¤æ˜“æ‰€æŠ½è±¡åŸºç±»"""
    
    @abstractmethod
    async def get_funding_rate(self, symbol: str) -> FundingRate:
        """è·å–å½“å‰èµ„é‡‘è´¹ç‡"""
        pass
    
    @abstractmethod
    async def get_predicted_rate(self, symbol: str) -> Decimal:
        """è·å–é¢„æµ‹èµ„é‡‘è´¹ç‡"""
        pass
    
    @abstractmethod
    async def get_orderbook(self, symbol: str, depth: int) -> OrderBook:
        """è·å–è®¢å•ç°¿"""
        pass
    
    @abstractmethod
    async def place_spot_order(self, symbol: str, side: str, qty: Decimal) -> Order:
        """ä¸‹ç°è´§å•"""
        pass
    
    @abstractmethod
    async def place_perp_order(self, symbol: str, side: str, qty: Decimal, leverage: int) -> Order:
        """ä¸‹æ°¸ç»­åˆçº¦å•"""
        pass
    
    @abstractmethod
    async def get_position(self, symbol: str) -> Position:
        """è·å–æŒä»“"""
        pass
```

### 4.3 CCXT é›†æˆ

ä½¿ç”¨ [CCXT](https://github.com/ccxt/ccxt) ç»Ÿä¸€æ¥å£ï¼š

```python
import ccxt.async_support as ccxt

class BinanceAdapter(ExchangeBase):
    def __init__(self, api_key: str, secret: str):
        self.spot = ccxt.binance({
            'apiKey': api_key,
            'secret': secret,
            'enableRateLimit': True,
        })
        self.perp = ccxt.binanceusdm({
            'apiKey': api_key,
            'secret': secret,
            'enableRateLimit': True,
        })
```

---

## 5. é…ç½®å‚æ•°

### 5.1 å…¨å±€é…ç½® (settings.yaml)

```yaml
# åŸºç¡€é…ç½®
capital:
  initial: 1000           # åˆå§‹èµ„é‡‘ USDT
  max_position_ratio: 0.8 # æœ€å¤§ä»“ä½æ¯”ä¾‹
  reserve_ratio: 0.2      # ä¿ç•™èµ„é‡‘æ¯”ä¾‹

# äº¤æ˜“æ—¶é—´ (ä¸œä¸€åŒº)
trading_hours:
  timezone: "Europe/Paris"  # UTC+1
  start: "08:00"
  end: "22:00"
  
# æ‰§è¡Œå‚æ•°
execution:
  check_interval: 60      # æ‰«æé—´éš”ï¼ˆç§’ï¼‰
  order_timeout: 30       # ä¸‹å•è¶…æ—¶ï¼ˆç§’ï¼‰
  max_retries: 3          # æœ€å¤§é‡è¯•æ¬¡æ•°
```

### 5.2 ç­–ç•¥é…ç½® (strategy.yaml)

```yaml
# æ± å­ç­›é€‰
filter:
  volume_24h:
    min: 500000           # æœ€å°æ—¥äº¤æ˜“é‡ $500K
    max: 5000000          # æœ€å¤§æ—¥äº¤æ˜“é‡ $5M
  depth_05pct:
    min: 10000            # Â±0.5%æ·±åº¦æœ€å° $10K
  funding_rate:
    min_abs: 0.0003       # æœ€å°è´¹ç‡ç»å¯¹å€¼ 0.03%
  spread:
    max: 0.001            # æœ€å¤§ä»·å·® 0.1%

# ä»“ä½ç®¡ç†
position:
  max_single_ratio: 0.3   # å•å¸ç§æœ€å¤§å æ¯”
  leverage: 2             # é»˜è®¤æ æ†
  delta_tolerance: 0.02   # Delta å®¹å¿åº¦

# é£é™©æ§åˆ¶
risk:
  margin_warning: 0.5     # ä¿è¯é‡‘è­¦å‘Šé˜ˆå€¼
  margin_close: 0.3       # å¼ºåˆ¶å¹³ä»“é˜ˆå€¼
  max_loss_pct: 0.02      # å•ç¬”æœ€å¤§äºæŸ
  rate_reversal_periods: 2 # è´¹ç‡åè½¬è§‚å¯ŸæœŸæ•°
```

---

## 6. è¿è¡Œæµç¨‹

### 6.1 ä¸»å¾ªç¯

```python
async def main_loop():
    """
    å¥—åˆ©ä¸»å¾ªç¯
    1. æ‰«ææœºä¼š â†’ 2. ç­›é€‰æ± å­ â†’ 3. æ‰§è¡Œå¥—åˆ© â†’ 4. ç›‘æ§ä»“ä½ â†’ 5. é£é™©æ£€æŸ¥
    """
    while is_trading_time():
        # 1. è·å–æ‰€æœ‰äº¤æ˜“å¯¹çš„èµ„é‡‘è´¹ç‡
        rates = await fetch_all_funding_rates()
        
        # 2. ç­›é€‰ç¬¦åˆæ¡ä»¶çš„æ± å­
        candidates = filter_pools(rates)
        
        if candidates:
            # 3. é€‰æ‹©æœ€ä¼˜æœºä¼šæ‰§è¡Œå¥—åˆ©
            best = candidates[0]
            await execute_arbitrage(best)
        
        # 4. ç›‘æ§ç°æœ‰ä»“ä½
        for pos in get_open_positions():
            # 5. é£é™©æ£€æŸ¥
            action = await check_risk(pos)
            if action != RiskAction.HOLD:
                await handle_risk_action(pos, action)
        
        # ç­‰å¾…ä¸‹ä¸€è½®
        await asyncio.sleep(CHECK_INTERVAL)
```

### 6.2 èµ„é‡‘è´¹ç‡ç»“ç®—

```
UTC æ—¶é—´: 00:00, 08:00, 16:00 ç»“ç®—
ä¸œä¸€åŒºæ—¶é—´: 01:00, 09:00, 17:00 ç»“ç®—

å»ºè®®æ“ä½œæ—¶æœº:
- ç»“ç®—å‰ 30 åˆ†é’Ÿ: æ£€æŸ¥è´¹ç‡æ–¹å‘ï¼Œå†³å®šæ˜¯å¦æŒä»“
- ç»“ç®—å 10 åˆ†é’Ÿ: ç¡®è®¤è´¹ç‡æ”¶ç›Šåˆ°è´¦
- ç»“ç®—å‰ 5 åˆ†é’Ÿ: é¿å…å¼€æ–°ä»“ï¼ˆè´¹ç‡å¯èƒ½å˜åŒ–ï¼‰
```

---

## 7. æ”¶ç›Šä¸æˆæœ¬åˆ†æ

### 7.1 æˆæœ¬ç»“æ„

| æˆæœ¬é¡¹ | Binance | Bybit | è¯´æ˜ |
|--------|---------|-------|------|
| ç°è´§ Taker | 0.10% | 0.10% | å¯ç”¨ BNB/BIT æŠµæ‰£ |
| åˆçº¦ Taker | 0.04% | 0.055% | Maker æ›´ä½ |
| èµ„é‡‘åˆ’è½¬ | å…è´¹ | å…è´¹ | åŒäº¤æ˜“æ‰€å†…éƒ¨ |

### 7.2 æ”¶ç›Šè®¡ç®—

```python
def calculate_profit(
    funding_rate: Decimal,      # èµ„é‡‘è´¹ç‡
    position_value: Decimal,    # æŒä»“ä»·å€¼
    spot_fee: Decimal = 0.001,  # ç°è´§æ‰‹ç»­è´¹ 0.1%
    perp_fee: Decimal = 0.0004, # åˆçº¦æ‰‹ç»­è´¹ 0.04%
) -> Decimal:
    """
    å•æ¬¡å¥—åˆ©æ”¶ç›Šè®¡ç®—
    """
    # è´¹ç‡æ”¶ç›Š
    funding_income = position_value * funding_rate
    
    # å¼€ä»“æˆæœ¬ (ç°è´§ä¹°å…¥ + åˆçº¦å¼€ç©º)
    open_cost = position_value * (spot_fee + perp_fee)
    
    # å¹³ä»“æˆæœ¬ (ç°è´§å–å‡º + åˆçº¦å¹³ç©º)
    close_cost = position_value * (spot_fee + perp_fee)
    
    # å‡€æ”¶ç›Š (å‡è®¾æŒä»“ 1 æœŸ)
    net_profit = funding_income - open_cost - close_cost
    
    return net_profit

# ç¤ºä¾‹: 1000 USDT ä»“ä½ï¼Œ0.1% è´¹ç‡
# æ”¶ç›Š = 1000 * 0.001 - 1000 * (0.001 + 0.0004) * 2 = 1 - 2.8 = -1.8 USDT (å•æœŸäºæŸ)
# 
# å› æ­¤éœ€è¦æŒä»“å¤šæœŸæ‰èƒ½è¦†ç›–å¼€å¹³ä»“æˆæœ¬:
# ç›ˆäºå¹³è¡¡æœŸæ•° = å¼€å¹³ä»“æˆæœ¬ / å•æœŸè´¹ç‡æ”¶ç›Š = 2.8 / 1 = 2.8 æœŸ â‰ˆ 3 æœŸ = 24 å°æ—¶
```

### 7.3 ç›ˆäºå¹³è¡¡åˆ†æ

| èµ„é‡‘è´¹ç‡ | ç›ˆäºå¹³è¡¡æœŸæ•° | ç›ˆäºå¹³è¡¡æ—¶é—´ |
|----------|--------------|--------------|
| 0.03% | 9.3 æœŸ | ~3 å¤© |
| 0.05% | 5.6 æœŸ | ~2 å¤© |
| 0.10% | 2.8 æœŸ | ~1 å¤© |
| 0.20% | 1.4 æœŸ | ~12 å°æ—¶ |
| 0.50% | 0.6 æœŸ | ~5 å°æ—¶ |

> **ç»“è®º**: åªæœ‰åœ¨è´¹ç‡ >= 0.1% æ—¶ï¼ŒçŸ­æœŸå¥—åˆ©æ‰åˆ’ç®—ï¼›ä½è´¹ç‡éœ€è¦é•¿æœŸæŒä»“ã€‚

---

## 8. ç›‘æ§ä¸é€šçŸ¥

### 8.1 ç›‘æ§æŒ‡æ ‡

| æŒ‡æ ‡ | é¢‘ç‡ | å‘Šè­¦é˜ˆå€¼ |
|------|------|----------|
| ä»“ä½ Delta | 1 åˆ†é’Ÿ | > 5% |
| ä¿è¯é‡‘ç‡ | 1 åˆ†é’Ÿ | < 50% |
| èµ„é‡‘è´¹ç‡ | 5 åˆ†é’Ÿ | æ–¹å‘åè½¬ |
| API å»¶è¿Ÿ | 10 ç§’ | > 3 ç§’ |
| è´¦æˆ·ä½™é¢ | 5 åˆ†é’Ÿ | < åˆå§‹ 90% |

### 8.2 é€šçŸ¥æ¸ é“

- **Telegram Bot**: å®æ—¶æ¨é€äº¤æ˜“ä¿¡å·å’Œé£é™©å‘Šè­¦
- **æ—¥å¿—æ–‡ä»¶**: è¯¦ç»†è®°å½•æ¯ç¬”æ“ä½œ
- **Dashboard**: Web ç•Œé¢ç›‘æ§ï¼ˆå¯é€‰ï¼‰

---

## 9. å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¡†æ¶ âœ… å·²å®Œæˆ
- [x] é¡¹ç›®ç»“æ„æ­å»º
- [x] é…ç½®ç®¡ç†æ¨¡å— (YAML + .env)
- [x] æ—¥å¿—ç³»ç»Ÿ (loguru)
- [x] äº¤æ˜“æ‰€ API å°è£… (Binance âœ…, Bybit, OKX)
- [x] æ•°æ®è§£æå®¹é”™å¤„ç†

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ âœ… å·²å®Œæˆ
- [x] èµ„é‡‘è´¹ç‡é‡‡é›†
- [x] æ± å­ç­›é€‰å™¨ (strict/relaxed æ¨¡å¼)
- [x] å¤šäº¤æ˜“æ‰€æœ€ä¼˜æœºä¼šé€‰æ‹©å™¨
- [x] Binance API éªŒè¯é€šè¿‡
- [x] **ä»“ä½ç®¡ç†** (æŒä¹…åŒ–å­˜å‚¨ + è´¹ç‡æ”¶å…¥è¿½è¸ª)
- [x] é£é™©æ§åˆ¶æ¨¡å—

### Phase 3: äº¤æ˜“æ‰§è¡Œ âœ… å·²å®Œæˆ
- [x] **è‡ªåŠ¨äº¤æ˜“æœºå™¨äºº** (`scripts/auto_trade.py`)
  - é«˜æ”¶ç›Šæœºä¼šè‡ªåŠ¨å¼€ä»“
  - åŠ¨æ€ä»“ä½å®¹é‡è®¡ç®—
  - æŒä»“ä¸€è‡´æ€§éªŒè¯ä¸è‡ªåŠ¨ä¿®å¤
- [x] **Delta å¯¹å†²æ‰§è¡Œ** (ç°è´§+åˆçº¦åŒæ­¥ä¸‹å•)
- [x] **è®¢å•çŠ¶æ€ç›‘æ§** (æˆäº¤ç¡®è®¤ + å¼‚å¸¸å¤„ç†)
- [x] **é£é™©ç›‘æ§ä¸ç¦»åœº** (è´¹ç‡åè½¬æ£€æµ‹ + ä½æ”¶ç›Šç¦»åœº)
- [x] **æŒä»“è½®åŠ¨ä¼˜åŒ–** (èµ„é‡‘è½®åŠ¨ç­–ç•¥)
- [x] **å­¤å„¿æŒä»“åŒæ­¥** (è‡ªåŠ¨è®¤é¢†äº¤æ˜“æ‰€æœªæ‰˜ç®¡æŒä»“)

### Phase 4: ä¼˜åŒ–ä¸ç›‘æ§ âœ… å·²å®Œæˆ
- [x] **Telegram é€šçŸ¥ç³»ç»Ÿ** (`src/utils/notify.py`)
  - å¥—åˆ©æœºä¼šæé†’
  - å¼€ä»“/å¹³ä»“äº¤æ˜“é€šçŸ¥
  - è´¹ç‡æ”¶å…¥é€šçŸ¥
  - é£é™©å‘Šè­¦ (åˆ†çº§: è­¦å‘Š/ç´§æ€¥/ä¸¥é‡)
  - å¯åŠ¨çŠ¶æ€æŠ¥å‘Š
  - å®šæœŸçŠ¶æ€æ›´æ–° (æ¯4å°æ—¶)
  - æ¯æ—¥æ”¶ç›ŠæŠ¥å‘Š
- [x] **å›æµ‹ç³»ç»Ÿ** (`src/backtest/` + `scripts/run_backtest.py`)
  - å†å²è´¹ç‡æ•°æ®åŠ è½½
  - ç­–ç•¥å›æµ‹å¼•æ“
  - ROI/APY/æœ€å¤§å›æ’¤è®¡ç®—
- [x] **æ”¶ç›Šå¯è§†åŒ–** (`scripts/visualize_profit.py`)
  - ç´¯è®¡æ”¶ç›Šæ›²çº¿
  - æ¯æ—¥æ”¶ç›Šåˆ†å¸ƒ
  - å¸ç§è´¡çŒ®å æ¯”
  - äº¤äº’å¼ HTML æŠ¥è¡¨
- [x] **è´¹ç‡æ”¶å…¥è¿½è¸ª** (`src/core/funding_tracker.py`)
  - æ¯æ¬¡ç»“ç®—è®°å½•
  - æŒ‰æ—¥/æŒ‰å¸ç§ç»Ÿè®¡
  - æ”¶å…¥æ‘˜è¦æŠ¥å‘Š

### Phase 5: é«˜çº§åŠŸèƒ½ ğŸ“‹ å¾…å¼€å‘
- [ ] **è·¨äº¤æ˜“æ‰€å¤šç©ºå¥—åˆ©** (åšå¤šè´¹ç‡ä½äº¤æ˜“æ‰€ã€åšç©ºè´¹ç‡é«˜äº¤æ˜“æ‰€ï¼Œåˆ©ç”¨ä»·å·®ä¸è´¹ç‡å·®)
- [ ] **ä»“ä½ç®¡ç†ç³»ç»Ÿ 2.0** (åŠ¨æ€ä¿è¯é‡‘/æ æ†åˆ†é…ã€åˆ†å±‚æ­¢ç›ˆæ­¢æŸã€è·¨å“ç§å‡€æ•å£æ§åˆ¶)
- [ ] **åˆçº¦å›å½’ä»·æ ¼å¥—åˆ©åˆæ¢** (ç ”ç©¶æ°¸ç»­åŸºå·®å›å½’æ¨¡å‹ï¼Œæ¢ç´¢åŸºå·®å‡å€¼å›å½’/åè½¬è§¦å‘)
- [ ] **å¤šè´¦æˆ·æ”¯æŒ** (åŒæ—¶ç®¡ç†å¤šä¸ªäº¤æ˜“æ‰€è´¦æˆ·)
- [ ] **Bybit/OKX å®ç›˜** (å®Œæˆå¤šäº¤æ˜“æ‰€é€‚é…)
- [ ] **Web Dashboard** (å®æ—¶ç›‘æ§ç•Œé¢)
- [ ] **ç­–ç•¥ä¼˜åŒ–** (æœºå™¨å­¦ä¹ ä¼˜åŒ–å¼€ä»“é˜ˆå€¼)

---

### ğŸ¯ å½“å‰çŠ¶æ€

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| è‡ªåŠ¨äº¤æ˜“ | âœ… è¿è¡Œä¸­ | `auto_trade.py` 7Ã—24 å°æ—¶è¿è¡Œ |
| Telegram æ¨é€ | âœ… å·²é…ç½® | å®æ—¶æ¥æ”¶äº¤æ˜“é€šçŸ¥å’ŒçŠ¶æ€æ›´æ–° |
| å›æµ‹ç³»ç»Ÿ | âœ… å¯ç”¨ | æ”¯æŒå†å²è´¹ç‡å›æµ‹éªŒè¯ |
| æ”¶ç›ŠæŠ¥è¡¨ | âœ… å¯ç”¨ | ç”Ÿæˆäº¤äº’å¼ HTML æŠ¥è¡¨ |
| å¤šäº¤æ˜“æ‰€ | ğŸ”„ éƒ¨åˆ†å®Œæˆ | Binance å·²å®Œæˆï¼ŒBybit/OKX å¾…é…ç½® |

---

## 10. æ³¨æ„äº‹é¡¹

> [!CAUTION]
> ### é£é™©æç¤º
> 1. **æ¸…ç®—é£é™©**: å³ä½¿ Delta ä¸­æ€§ï¼Œæç«¯è¡Œæƒ…ä¸‹åˆçº¦å¯èƒ½è¢«æ¸…ç®—
> 2. **è´¹ç‡åè½¬**: è´¹ç‡å¯èƒ½çªç„¶åå‘ï¼Œå¯¼è‡´äºæŸ
> 3. **API æ•…éšœ**: äº¤æ˜“æ‰€ API å¯èƒ½å»¶è¿Ÿæˆ–å®•æœº
> 4. **ç›‘ç®¡é£é™©**: éƒ¨åˆ†åœ°åŒºåŠ å¯†è´§å¸äº¤æ˜“å—é™

> [!IMPORTANT]
> ### æ“ä½œåŸåˆ™
> 1. æ°¸è¿œä½¿ç”¨**æµ‹è¯•ç½‘**å…ˆéªŒè¯ç­–ç•¥
> 2. åˆå§‹èµ„é‡‘ä¸è¶…è¿‡**å¯æ‰¿å—æŸå¤±**çš„é¢åº¦
> 3. è®¾ç½®**æ¯æ—¥æœ€å¤§äºæŸ**ä¸Šé™
> 4. å®šæœŸ**å¤ç›˜**äº¤æ˜“è®°å½•

---

*æ–‡æ¡£ç»“æŸ*
